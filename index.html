<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="assets/style/style.css">
    <title>Formularz</title>
</head>
<body>
    <div id="container">
    <h1>Porównywarka</h1>
    <form id="myForm" method="post">
        <label for="nip">NIP:</label>
        <input type="text" id="nip" name="nip" required><br>
        <label for="email">E-mail:</label>
        <input type="email" id="email" name="email" required><br>
        <label for="nrTelefonu">Numer telefonu:</label>
        <input type="text" id="nrTelefonu" name="nrTelefonu" required><br>
        <label for="zuzycie">Zużycie:</label>
        <input type="text" id="zuzycie" name="zuzycie" required><br>
        <label for="czasTrwaniaUmowy">Czas Trwania Umowy:</label>
        <input type="text" id="czasTrwaniaUmowy" name="czasTrwaniaUmowy" required><br>
        <label for="grupaTaryfowa">Grupa Taryfowa:</label>
        <input type="text" id="grupaTaryfowa" name="grupaTaryfowa" required><br>
        <button type="submit">Wyślij</button>
    </form>
    </div>
    <script>
        
        async function submitForm(event) {
            event.preventDefault();

            // Pobierz dane z formularza
            const nip = document.getElementById('nip').value;
            const email = document.getElementById('email').value;
            const nrTelefonu = document.getElementById('nrTelefonu').value;
            const zuzycie = parseFloat(document.getElementById('zuzycie').value);
            const czasTrwaniaUmowy = parseInt(document.getElementById('czasTrwaniaUmowy').value);
            const grupaTaryfowa = document.getElementById('grupaTaryfowa').value;

            // Wyślij dane do serwera
            const response = await fetch('http://localhost:3000/obliczenia', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    nip,
                    email,
                    nrTelefonu,
                    zuzycie,
                    czasTrwaniaUmowy,
                    grupaTaryfowa,
                }),
            });

            if (response.ok) {
                // Pobierz odpowiedź z serwera
                const data = await response.json();
                console.log(data);
                // Tutaj możesz dodać kod do aktualizacji interfejsu użytkownika lub wykonania innych działań po otrzymaniu wyniku
            } else {
                console.error('Błąd podczas przetwarzania danych.');
            }
        }
        document.getElementById('myForm').addEventListener('submit', async function (event) {
            await submitForm(event);
        });
    </script>
</body>
</html>